<!-- markdownlint-disable md025 -->
<!-- markdownlint-disable md036 -->

# 20260117

# DBの概念設計

E-R モデル図  
主キーと外部キー  
UML、クラス図

# DBの論理設計

候補キー（candidate key）と主キー（Primary key）  
正規化
ボイスコッド正規系

---
**正規化前；ぐちゃぐちゃ、一つのセルに複数の値が入っている**

| 受注番号 | 受注日 | 顧客名 | 商品情報（繰り返し） |
| :--- | :--- | :--- | :--- |
| 101 | 2026/01/17 | 山田商事 | {P01, PC, 10万}, {M05, マウス, 2千} |

**第1正規化；繰り返し項目の排除**

| 受注番号(主) | 商品コード(主) | 受注日 | 顧客名 | 商品名 | 単価 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| 101 | P01 | 2026/01/17 | 山田商事 | PC | 100,000 |
| 101 | M05 | 2026/01/17 | 山田商事 | マウス | 2,000 |

**第2正規化;主キーの一部（受注番号だけ）で決まる項目を、別のテーブルに切り出しす**

【受注テーブル】

| 受注番号(主) | 受注日 | 顧客名 |
| :--- | :--- | :--- |
| 101 | 2026/01/17 | 山田商事 |

【受注明細テーブル】

| 受注番号(主) | 商品コード(主) | 商品名 | 単価 |
| :--- | :--- | :--- | :--- |
| 101 | P01 | PC | 100,000 |
| 101 | M05 | マウス | 2,000 |

**第3正規化：推移的関数従属の排除**

【受注テーブル】 （変更なし）

| 受注番号(主) | 受注日 | 顧客名 |
| :--- | :--- | :--- |
| 101 | 2026/01/17 | 山田商事 |

【受注明細テーブル】 （商品情報を切り離す）

| 受注番号(主) | 商品コード(主) |
| :--- | :--- |
| 101 | P01 |
| 101 | M05 |

【商品テーブル】 （新設）

| 商品コード(主) | 商品名 | 単価 |
| :--- | :--- | :--- |
| P01 | PC | 100,000 |
| M05 | マウス | 2,000 |

---

参照制約と外部キー；外部キーの値が被参照表の主キー（候補キー）に存在することを保証する制約
